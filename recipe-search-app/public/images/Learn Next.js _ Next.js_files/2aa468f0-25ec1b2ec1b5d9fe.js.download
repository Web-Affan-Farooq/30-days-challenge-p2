"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1059],{68026:(e,t,r)=>{r.d(t,{$C:()=>eI});var n,a,o,s,i,l,u,c,d,m=r(10465),p=r(98961),f=r(84597),h=r(84386),y=Object.defineProperty,v=(e,t)=>{for(var r in t)y(e,r,{get:t[r],enumerable:!0})};async function g(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var z="AI_RetryError",b=`vercel.ai.error.${z}`,x=Symbol.for(b),T=class extends p.bD{constructor({message:e,reason:t,errors:r}){super({name:z,message:e}),this[n]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return p.bD.hasMarker(e,b)}static isRetryError(e){return e instanceof Error&&e.name===z&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};n=x;var w={spanContext:()=>S,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},S={traceId:"",spanId:"",traceFlags:0},E="AI_DownloadError",I=`vercel.ai.error.${E}`,A=Symbol.for(I),_=class extends p.bD{constructor({url:e,statusCode:t,statusText:r,cause:n,message:o=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:E,message:o,cause:n}),this[a]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return p.bD.hasMarker(e,I)}static isDownloadError(e){return e instanceof Error&&e.name===E&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};a=A;var D=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],k="AI_InvalidDataContentError",C=`vercel.ai.error.${k}`,M=Symbol.for(C),$=class extends p.bD{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:k,message:r,cause:t}),this[o]=!0,this.content=e}static isInstance(e){return p.bD.hasMarker(e,C)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===k&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};o=M;var j=f.z.union([f.z.string(),f.z.instanceof(Uint8Array),f.z.instanceof(ArrayBuffer),f.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function R(e){return"string"==typeof e?e:e instanceof ArrayBuffer?convertUint8ArrayToBase64(new Uint8Array(e)):convertUint8ArrayToBase64(e)}function N(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return convertBase64ToUint8Array(e)}catch(t){throw new $({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new $({content:e})}var B="AI_InvalidMessageRoleError",U=`vercel.ai.error.${B}`,q=Symbol.for(U),O=class extends p.bD{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:B,message:t}),this[s]=!0,this.role=e}static isInstance(e){return p.bD.hasMarker(e,U)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===B&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};function F(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}s=q;var J="AI_InvalidArgumentError",L=`vercel.ai.error.${J}`,P=Symbol.for(L);p.bD,i=P;var K=f.z.lazy(()=>f.z.union([f.z.null(),f.z.string(),f.z.number(),f.z.boolean(),f.z.record(f.z.string(),K),f.z.array(K)])),V=f.z.record(f.z.string(),f.z.record(f.z.string(),K)),G=f.z.object({type:f.z.literal("text"),text:f.z.string(),experimental_providerMetadata:V.optional()}),H=f.z.object({type:f.z.literal("image"),image:f.z.union([j,f.z.instanceof(URL)]),mimeType:f.z.string().optional(),experimental_providerMetadata:V.optional()}),X=f.z.object({type:f.z.literal("file"),data:f.z.union([j,f.z.instanceof(URL)]),mimeType:f.z.string(),experimental_providerMetadata:V.optional()}),Q=f.z.object({type:f.z.literal("tool-call"),toolCallId:f.z.string(),toolName:f.z.string(),args:f.z.unknown()}),W=f.z.object({type:f.z.literal("tool-result"),toolCallId:f.z.string(),toolName:f.z.string(),result:f.z.unknown(),isError:f.z.boolean().optional(),experimental_providerMetadata:V.optional()}),Y=f.z.object({role:f.z.literal("system"),content:f.z.string(),experimental_providerMetadata:V.optional()}),Z=f.z.object({role:f.z.literal("user"),content:f.z.union([f.z.string(),f.z.array(f.z.union([G,H,X]))]),experimental_providerMetadata:V.optional()}),ee=f.z.object({role:f.z.literal("assistant"),content:f.z.union([f.z.string(),f.z.array(f.z.union([G,Q]))]),experimental_providerMetadata:V.optional()}),et=f.z.object({role:f.z.literal("tool"),content:f.z.array(W),experimental_providerMetadata:V.optional()});function er(e,{contentType:t,dataStreamVersion:r}){var n;let a=new Headers(null!=(n=null==e?void 0:e.headers)?n:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}f.z.union([Y,Z,ee,et]);var en="AI_NoObjectGeneratedError",ea=`vercel.ai.error.${en}`,eo=Symbol.for(ea),es=class extends p.bD{constructor({message:e="No object generated."}={}){super({name:en,message:e}),this[l]=!0}static isInstance(e){return p.bD.hasMarker(e,ea)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===en}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};l=eo;(0,m.hK)({prefix:"aiobj-",size:24});(0,m.hK)({prefix:"aiobj-",size:24});var ei="AI_InvalidToolArgumentsError",el=`vercel.ai.error.${ei}`,eu=Symbol.for(el);p.bD,u=eu;var ec="AI_NoSuchToolError",ed=`vercel.ai.error.${ec}`,em=Symbol.for(ed);p.bD,c=em;var ep=Symbol.for("vercel.ai.error.AI_MessageConversionError");p.bD;function ef(e,t){let r,n;let a=e.getReader(),o=t.getReader(),s=!1,i=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=o.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(s){await u(e);return}if(i){await l(e);return}null==r&&(r=a.read()),null==n&&(n=o.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:o}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),s=!0)):(n=void 0,t.done&&(i=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),o.cancel()}})}(0,m.hK)({prefix:"aitxt-",size:24}),(0,m.hK)({prefix:"aitxt-",size:24});var eh="AI_NoSuchProviderError",ey=`vercel.ai.error.${eh}`,ev=Symbol.for(ey);function eg(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,a){let o="string"==typeof e?e:e.content;a.enqueue(t.encode(o)),r+=o,n.onToken&&await n.onToken(o),n.onText&&"string"==typeof e&&await n.onText(e)},async flush(){let e="experimental_onFunctionCall"in n;n.onCompletion&&await n.onCompletion(r),n.onFinal&&!e&&await n.onFinal(r)}})}p.eM,d=ev;function ez(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode((0,h.L6)("text",a)))}})}new TextDecoder("utf-8");function eb(e,t){return ex(e,t)}function ex(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&ew(null==(r=e.data)?void 0:r.chunk,t);return}ew(e,t)}})).pipeThrough(eg(t)).pipeThrough(ez())}function eT(e,t){var r;let n=ex(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,o=null==t?void 0:t.init;return new Response(a?ef(a.stream,n):n,{status:null!=(r=null==o?void 0:o.status)?r:200,statusText:null==o?void 0:o.statusText,headers:er(o,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function ew(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function eS(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),n=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:a,done:o}=await r.next();if(o){e.close();return}let s=n(null!=(t=a.delta)?t:"");s&&e.enqueue(s)}})})(e).pipeThrough(eg(t)).pipeThrough(ez())}function eE(e,t={}){var r;let{init:n,data:a,callbacks:o}=t,s=eS(e,o);return new Response(a?ef(a.stream,s):s,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:er(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}v({},{toAIStream:()=>eb,toDataStream:()=>ex,toDataStreamResponse:()=>eT}),v({},{toDataStream:()=>eS,toDataStreamResponse:()=>eE});Symbol("internal_openai_fn_messages"),Response;var eI=m.$C}}]);